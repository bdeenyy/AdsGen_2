"""
AdsGen 2.0 - Text Generation Prompts
Migrated from avito-vacancies-v3.gs - AI prompts for vacancy content generation
"""

# Description templates migrated from templates.gs
DESCRIPTION_TEMPLATES = {
    "Повар": {
        "duties": [
            "<ul><li>Приготовление блюд по рецептам</li><li>Соблюдение санитарных норм</li><li>Контроль качества</li><li>Работа на кухне</li></ul>",
            "<p>• Готовка салатов и горячих блюд<br>• Соблюдение технологических карт<br>• Чистота на рабочем месте<br>• Участие в плановых заготовках</p>",
        ],
        "advantages": [
            "• Льготное питание всего 60 рублей<br>• Зоны отдыха<br>• Обучение на месте<br>• Удобный график",
            "• Быстрые ежедневные выплаты<br>• Работа рядом с домом<br>• Молодая команда",
        ],
    },
    "Кассир": {
        "duties": [
            "<ul><li>Сканирование товаров</li><li>Работа с наличными и картами</li><li>Выдача сдачи</li><li>Контроль весового товара</li></ul>",
            "<p>• Быстрое пробитие штрихкодов<br>• Прием различных способов оплаты<br>• Корректный расчет сдачи</p>",
        ],
        "advantages": [
            "• Гибкий график работы<br>• Ежедневные выплаты<br>• Без опыта (обучим)<br>• Подработка для студентов",
            "• Работа в крупной сети<br>• Дружный коллектив<br>• Быстрое оформление",
        ],
    },
    "Работник торгового зала": {
        "duties": [
            "<ul><li>Выкладка товаров</li><li>Работа с ценниками</li><li>Консультация покупателей</li><li>Уборка полок</li></ul>",
        ],
        "advantages": [
            "• Работа без опыта<br>• Гибкий график<br>• Ежедневные выплаты<br>• Подработка",
        ],
    },
    "Продавец": {
        "duties": [
            "<ul><li>Обслуживание клиентов</li><li>Консультация по товарам</li><li>Работа на кассе</li><li>Выкладка товара</li></ul>",
        ],
        "advantages": [
            "• Гибкий график<br>• Без опыта (обучение)<br>• Ежедневные выплаты",
        ],
    },
    "Грузчик": {
        "duties": [
            "<ul><li>Погрузка и разгрузка товаров</li><li>Перемещение грузов по складу</li><li>Сортировка товаров</li></ul>",
        ],
        "advantages": [
            "• Ежедневные выплаты<br>• Гибкий график<br>• Обучение работе с техникой",
        ],
    },
    "Пекарь": {
        "duties": [
            "<ul><li>Выпечка хлеба и булок</li><li>Соблюдение рецептур</li><li>Контроль качества</li></ul>",
        ],
        "advantages": [
            "• Ежедневные выплаты<br>• График 2/2<br>• Обучение",
        ],
    },
    "Посудомойщик": {
        "duties": [
            "<ul><li>Мойка посуды</li><li>Уборка производственных помещений</li><li>Содержание чистоты</li></ul>",
        ],
        "advantages": [
            "• Легкая работа<br>• Ежедневные выплаты<br>• Гибкий график",
        ],
    },
    "Уборщик": {
        "duties": [
            "<ul><li>Уборка торгового зала</li><li>Мытье полов</li><li>Вынос мусора</li></ul>",
        ],
        "advantages": [
            "• Легкая работа<br>• Ежедневные выплаты<br>• Без опыта",
        ],
    },
    "Фасовщик": {
        "duties": [
            "<ul><li>Фасовка товаров</li><li>Упаковка продукции</li><li>Маркировка</li></ul>",
        ],
        "advantages": [
            "• Монотонная работа<br>• Ежедневные выплаты<br>• Обучение",
        ],
    },
    "Мясник": {
        "duties": [
            "<ul><li>Разделка мяса и птицы</li><li>Подготовка полуфабрикатов</li><li>Выкладка на витрину</li></ul>",
        ],
        "advantages": [
            "• Ежедневные выплаты<br>• Гибкий график<br>• Обучение",
        ],
    },
    "Подсобный рабочий": {
        "duties": [
            "<ul><li>Различные вспомогательные работы</li><li>Уборка помещений</li><li>Поддержание порядка</li></ul>",
        ],
        "advantages": [
            "• Разнообразная работа<br>• Ежедневные выплаты<br>• Без опыта",
        ],
    },
}

# Тональности для случайного выбора
TONES = [
    "Дружелюбный и заботливый",
    "Энергичный и драйвовый",
    "Профессиональный и лаконичный",
    "Теплый и человечный",
]


def get_generation_prompt(
    profession: str,
    address: str,
    salary: str,
    service: str,
    store_type: str,
) -> str:
    """
    Build the AI generation prompt.
    Migrated from generateAiVacancyContent() in avito-vacancies-v3.gs
    """
    import random
    
    # Map store type
    store_context = "Магазин"
    if store_type in ("ГМ", "ЦП"):
        store_context = "Гипермаркет (крупный формат)"
    elif store_type == "МФ":
        store_context = "Магазин у дома / Супермаркет (малый формат)"
    
    # Get template for inspiration
    template = DESCRIPTION_TEMPLATES.get(profession, {"duties": [], "advantages": []})
    
    random_duty = ""
    random_adv = ""
    if template.get("duties"):
        random_duty = random.choice(template["duties"])
        # Strip HTML tags for prompt
        import re
        random_duty = re.sub(r'<[^>]*>', '', random_duty)
    
    if template.get("advantages"):
        random_adv = random.choice(template["advantages"])
        import re
        random_adv = re.sub(r'<[^>]*>', '', random_adv)
    
    random_tone = random.choice(TONES)
    
    prompt = f"""Ты — опытный HR-копирайтер. Твоя задача — написать уникальное название и описание вакансии для Авито СТРОГО про указанную профессию.

КРИТИЧЕСКИЙ КОНТЕКСТ:
1. Тип объекта: "{store_context}". Используй соответствующую терминологию.
2. Специфика услуги: "{service or 'Не указана'}". 
   Если в услуге указано использование техники/оборудования — ОБЯЗАТЕЛЬНО отрази это.

ДАННЫЕ ДЛЯ КОНТЕКСТА:
Профессия: {profession}
Локация: {address}
Зарплата/Ставка: {salary}
Тональность текста: {random_tone}

ИНФОРМАЦИЯ ДЛЯ ВДОХНОВЕНИЯ (используй факты отсюда, но перефразируй):
Обязанности: {random_duty}
Преимущества: {random_adv}

ИНСТРУКЦИИ ПО СОДЕРЖАНИЮ:
1. Используй СТРОГО только профессию "{profession}".
2. Сгенерируй ОДИН вариант названия (Title) и ОДИН вариант описания (Description).
3. Название должно быть коротким, привлекательным и включать "{profession}".
4. КРИТИЧЕСКИ ВАЖНО: ЗАПРЕЩЕНО указывать зарплату, ставку или фразы вроде "выплаты каждый день" в НАЗВАНИИ (Title).
5. **ЗАПРЕЩЕНО использовать символ "|" в тексте.**
6. **Описание должно быть длинным (не менее 600 символов).**
7. Текст должен быть живым, в стиле "{random_tone}". Выделяй выгоды.
8. **УНИКАЛЬНОСТЬ:** В конце описания обязательно добавь одно из двух:
   - Либо интересный/необычный факт об этой профессии.
   - Либо очень теплое, нестандартное пожелание кандидату.
9. В самом конце добавь короткий call-to-action.

ЗАПРЕЩЕНА ДИСКРИМИНАЦИЯ ПО СОСТОЯНИЮ ЗДОРОВЬЯ:
Категорически запрещено упоминать любые требования или ограничения по состоянию здоровья.
НЕ ИСПОЛЬЗУЙ фразы: "медицинская справка", "хорошее здоровье", "физически здоровым", "крепкое здоровье" и т.д.

ПРАВИЛА ОФОРМЛЕНИЯ:
- Описание должно содержать HTML теги: <p>, <strong>, <ul>, <li>.
- Используй эмодзи.
- ОТВЕТ В JSON: {{"title": "...", "description": "..."}}"""

    return prompt
