"""
AdsGen 2.0 - Position to Profession Mapping
Migrated from templates.gs - maps job positions to Avito professions
"""

# Маппинг должностей на профессии Avito
POSITION_TO_PROFESSION = {
    "Самосборка": "Работник торгового зала",
    "Повар": "Повар",
    "Повар в столовую": "Повар",
    "РТЗ (работник торгового зала)": "Работник торгового зала",
    "РТЗ": "Работник торгового зала",
    "Кассир": "Кассир",
    "Пекарь": "Пекарь",
    "Подсобный рабочий": "Подсобный рабочий",
    "Помощник повара": "Повар",
    "ОПРР": "Грузчик",
    "Пекарь-универсал": "Пекарь",
    "Мойщик": "Посудомойщик",
    "Мясник": "Мясник",
    "Уборщик": "Уборщик",
    "Продавец сервисной зоны": "Продавец",
    "Продавец-универсал": "Продавец",
    "Помощник пекаря": "Подсобный рабочий",
    "Фасовщик": "Фасовщик",
    "Грузчик": "Грузчик",
    "РТЗ НОЧЬ": "Работник торгового зала",
    "Продавец-универсал НОЧЬ": "Продавец",
    "Продавец за прилавок": "Продавец",
    "Прессовщик": "Прессовщик",
}

# Допустимые города
ALLOWED_CITIES = [
    "Москва",
    "Московская область",
    "Санкт-Петербург",
    "Ленинградская область",
    "Курск",
    "Орел",
    "Нижний Новгород",
]

# Маппинг города на префикс ID
CITY_ID_PREFIX = {
    "Москва": "M",
    "Московская область": "MO",
    "Санкт-Петербург": "SP",
    "Ленинградская область": "LO",
    "Курск": "K",
    "Орел": "O",
    "Нижний Новгород": "NN",
    "Не определено": "X",
}


def get_profession(position: str) -> str | None:
    """Get Avito profession name from position."""
    return POSITION_TO_PROFESSION.get(position.strip())


def generate_vacancy_id(city: str) -> str:
    """Generate unique vacancy ID with city prefix."""
    import random
    prefix = CITY_ID_PREFIX.get(city, "X")
    random_num = random.randint(100000000, 999999999)
    return f"{prefix}{random_num}"
