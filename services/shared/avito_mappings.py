"""
AdsGen 2.0 - Avito Mappings
Reference data for Avito XML export: professions, industries, mappings
"""

# ═══════════════════════════════════════════════════════════════════════════
# INDUSTRIES (55 values from Avito)
# ═══════════════════════════════════════════════════════════════════════════

INDUSTRIES = [
    "Архитектура и дизайн",
    "Банковские и финансовые услуги",
    "Бытовые и персональные услуги",
    "Госслужба",
    "Гостиничный бизнес и туризм",
    "Добыча, переработка, транспортировка нефти и газа",
    "Добыча, переработка угля, руд и других полезных ископаемых",
    "Доставка, грузоперевозки и логистика",
    "ЖКХ и городская инфраструктура",
    "Игорный бизнес",
    "Информационные технологии",
    "Искусство и развлечения",
    "Клининг",
    "Консалтинг",
    "Лесная и деревообрабатывающая промышленность",
    "Маркетинг, реклама и PR",
    "Медицина и фармацевтика",
    "Металлургическая промышленность",
    "НКО и общественная деятельность",
    "Оборонная промышленность",
    "Образование и наука",
    "Общественное питание",
    "Организация мероприятий",
    "Охрана и общественный порядок",
    "Переработка отходов",
    "Пищевая промышленность",
    "Продажа и обслуживание автомобилей",
    "Продажа и управление недвижимостью",
    "Производство непродовольственных потребительских товаров",
    "Производство промышленного оборудования и станков",
    "Производство тканей, одежды и обуви",
    "Производство электро- и оптического оборудования",
    "Производство электроники и бытовой техники",
    "Ракетно-космическая промышленность",
    "Ремонт и отделка помещений",
    "Ритуальные услуги",
    "Розничная и оптовая торговля",
    "Сельское хозяйство",
    "Склады и хранилища",
    "СМИ и издательское дело",
    "Страхование",
    "Строительство жилых и коммерческих объектов",
    "Строительство промышленных и инфраструктурных объектов",
    "Такси и пассажирские перевозки",
    "Телекоммуникации и связь",
    "Техническое обслуживание, ремонт техники и оборудования",
    "Транспортное машиностроение",
    "Тяжёлое машиностроение",
    "Управление персоналом",
    "Управление транспортной инфраструктурой",
    "Фитнес-клубы, спа и салоны красоты",
    "Химическая промышленность",
    "Энергетика",
    "Юриспруденция",
]


# ═══════════════════════════════════════════════════════════════════════════
# PROFESSION TO INDUSTRY MAPPING (default)
# ═══════════════════════════════════════════════════════════════════════════

# Key patterns for auto-mapping profession to industry
PROFESSION_INDUSTRY_MAP = {
    # Торговля
    "Продавец": "Розничная и оптовая торговля",
    "Кассир": "Розничная и оптовая торговля",
    "Мерчендайзер": "Розничная и оптовая торговля",
    "Товаровед": "Розничная и оптовая торговля",
    "Работник торгового зала": "Розничная и оптовая торговля",
    
    # Общепит
    "Повар": "Общественное питание",
    "Пекарь": "Общественное питание",
    "Кондитер": "Общественное питание",
    "Бариста": "Общественное питание",
    "Бармен": "Общественное питание",
    "Официант": "Общественное питание",
    "Шеф-повар": "Общественное питание",
    "Посудомойщик": "Общественное питание",
    
    # Склад/Логистика
    "Грузчик": "Склады и хранилища",
    "Кладовщик": "Склады и хранилища",
    "Комплектовщик": "Склады и хранилища",
    "Сотрудник склада": "Склады и хранилища",
    "Упаковщик": "Склады и хранилища",
    
    # Доставка
    "Курьер": "Доставка, грузоперевозки и логистика",
    "Водитель": "Доставка, грузоперевозки и логистика",
    "Экспедитор": "Доставка, грузоперевозки и логистика",
    
    # Клининг
    "Уборщик": "Клининг",
    "Мойщик": "Клининг",
    "Дворник": "ЖКХ и городская инфраструктура",
    
    # Охрана
    "Охранник": "Охрана и общественный порядок",
    "Сторож": "Охрана и общественный порядок",
    
    # Красота
    "Парикмахер": "Фитнес-клубы, спа и салоны красоты",
    "Косметолог": "Фитнес-клубы, спа и салоны красоты",
    "Мастер ногтевого сервиса": "Фитнес-клубы, спа и салоны красоты",
    
    # Строительство
    "Строитель": "Строительство жилых и коммерческих объектов",
    "Маляр": "Ремонт и отделка помещений",
    "Плиточник": "Ремонт и отделка помещений",
    "Сантехник": "Ремонт и отделка помещений",
    "Электрик": "Ремонт и отделка помещений",
    
    # IT
    "Разработчик": "Информационные технологии",
    "Программист": "Информационные технологии",
    "Системный администратор": "Информационные технологии",
    
    # Авто
    "Автомеханик": "Продажа и обслуживание автомобилей",
    "Автослесарь": "Продажа и обслуживание автомобилей",
    "Шиномонтажник": "Продажа и обслуживание автомобилей",
}


def get_industry_for_profession(profession: str) -> str:
    """
    Get industry for a given profession.
    Uses mapping table, with fallback to default.
    """
    if not profession:
        return "Розничная и оптовая торговля"
    
    # Exact match
    if profession in PROFESSION_INDUSTRY_MAP:
        return PROFESSION_INDUSTRY_MAP[profession]
    
    # Partial match (profession contains key)
    profession_lower = profession.lower()
    for key, industry in PROFESSION_INDUSTRY_MAP.items():
        if key.lower() in profession_lower:
            return industry
    
    # Default fallback
    return "Розничная и оптовая торговля"


# ═══════════════════════════════════════════════════════════════════════════
# EXPERIENCE MAPPING
# ═══════════════════════════════════════════════════════════════════════════

EXPERIENCE_MAP = {
    "Без опыта": "Без опыта",
    "Начинающий": "Без опыта",
    "1 год": "Более 1 года",
    "1-3 года": "Более 1 года",
    "3 года": "Более 3 лет",
    "3-5 лет": "Более 3 лет",
    "5 лет": "Более 5 лет",
    "Больше 5 лет": "Более 5 лет",
    "10 лет": "Более 10 лет",
}


def map_experience(level: str) -> str:
    """Map internal level to Avito experience value."""
    if not level:
        return "Без опыта"
    
    for key, value in EXPERIENCE_MAP.items():
        if key.lower() in level.lower():
            return value
    
    return "Без опыта"


# ═══════════════════════════════════════════════════════════════════════════
# SCHEDULE MAPPING
# ═══════════════════════════════════════════════════════════════════════════

SCHEDULE_TO_JOB_TYPE = {
    "2/2": "Сменный",
    "5/2": "Фиксированный",
    "Сменный": "Сменный",
    "Гибкий": "Гибкий",
    "Вахта": "Вахта",
    "Полный день": "Фиксированный",
}


def map_schedule_to_job_type(schedule: str) -> str:
    """Map internal schedule to Avito JobType."""
    if not schedule:
        return "Гибкий"
    
    for key, value in SCHEDULE_TO_JOB_TYPE.items():
        if key.lower() in schedule.lower():
            return value
    
    return "Гибкий"
